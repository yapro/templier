Templier
========

## Что такое Templier?

Это легкий SEO шаблонизатор динамичных файлов написанный на PHP.

## Возможности

Движок поддерживает любые расширения страниц в URL, т.к. в точности копирует древо директории /template. Однако, например, чтобы обратиться к урл /page.html - вам нужно создать файл /template/page.html.php Но советуем создавать имена шаблонов вида /template/page.php таким образом посетитель сайта будет видеть в адресной строке браузера, урл: /page - это более правильный вариант и более простой.

Шаблонизатор умеет самостоятельно генерировать title, description, keywords исходя из текста Вашей страницы. От Вас только требуется в метатегах шаблона прописать следующие конструкции: [~title~], [~description~], [~keywords~] и указать из какого именно текста Вы хотите составлять метатеги, для этого используйте в своем HTML - конструкцию вида:
```
<!--MetaData-->Мой <b>текст</b><!--/MetaData-->
```
подсказка: данную конструкцию можно использовать множество раз по всей странице

Шаблонизатор способен исправить ссылки на сторонние сайты таким образом, что у Вас будет сайт на котором не будет ни одной ссылки ведущей на чужой сайт, это большой плюс со стороны поисковых систем. При этом все сторонние ссылки будут с атрибутом target=_blank, а значит они будут открываться в новом окне и посетитель посетив сторонний ресур не забудет про Ваш сайт. Если Вам нужно чтобы к каким-то ссылкам не применялось это действие, то используйте конструкцию следующего вида:
```
<!--NoReplace-->Моя <a href="http://yapro.ru">ссылка</a> без замены<!--/NoReplace-->
```
подсказка: данную конструкцию можно использовать множество раз по всей странице

## Нюансы

Если посетитель случайно набрал слэш в конце URL, то шаблонизатор сам переадресует посетителя на страницу (удалив слэш).

Если запрошена главная страница, то подгружается шаблон /templates/index.php, редактируйте этот файл как хотите.

Если посетитель обратится к странице при этом передавая гет-переменные, то  получит ошибку 404. Но, если Вам нужно передавать гет-данные, то укажите в своем файле /my.php следующее разрешение:
```
$this->setAllowGetDataInUrl(true);
```
если файла /my.php нет, то создайте его.

Если Вам нужно распарсить урл и вытянуть из него нужные переменные, при этом не используя GET-данные, то в файле /my.php напишите следующее:
```
if( $data = $this->url('/my/super/{page}') ){

    echo $data['page']; exit;
}
```
это лишь пример показывающий, как можно извлекать данные из урл.

Если урл приходит к Вам с GET-данными, то в функцию url() передайте вторым параметром true :
```
if( $data = $this->url('/my/super/{page}', true) ){

    echo $data['page']; exit;
}
```

Если Вам нужно получить содержимое файла шаблона, то сделать это можно так:
```
$this->getTemplate($_SERVER['DOCUMENT_ROOT'].'/templates/url.php');
```
или так:
```
$this->getTemplate($_SERVER['DOCUMENT_ROOT'].'/templates/dir/file.php');
```

Файлы шаблонизатора, которые нужно править с осторожностью:
```
/index.php

/.htaccess
```

Ничего не кэшируется, но все работает быстро.

## Системные требования

PHP 4.3.x или выше

Apache 1.13.19 или выше

## Пример файла /my.php (который не является обязательным)

```
<?php

error_reporting(E_ERROR | E_PARSE | E_COMPILE_ERROR);

$this->setHost('yapro.ru');// доменное имя Вашего сайта (очень советуем Вам его указать)

$this->setAllowGetDataInUrl(true);// разрешаем передачу гет-данных (неправильно со стороны SEO)

$url = current( explode('?', $_SERVER['REQUEST_URI']) );// избавимся от гет-данных

if( empty($url) || $url === '/' ){
    $page = 0;
}

if( $data = $this->url('/my/news/{page}', true) ){

    if( is_numeric($data['page']) ){
        $page = $data['page'];
    }
}

if( isset($page) ){

    $this->getTemplate($_SERVER['DOCUMENT_ROOT'].'/templates/index.php');

    showNews($this, $page);

}

function showNews(\Templier $Templier, $page = 0){

    echo str_replace('$page', 'page : '.$page, $Templier->getContent());

}
```